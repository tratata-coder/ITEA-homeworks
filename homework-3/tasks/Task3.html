<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>ITEA JS Advanced. Lesson 3: Task 3</title>
	<link rel="stylesheet" href="css/normalize.css" />
	<link rel="stylesheet" href="css/style.css" />
</head>
<body>
	<div class="wrap" id="wrap">
		<h1>Переключение слайдера</h1>
		<div class="roadMap__container yellow">
			<button class="navButton" data-direction="<"> Prev </button>
			<div class="roadMap">
				<div class="roadMapPoint" data-id="1"></div>
				<div class="roadMapPoint" data-id="2"></div>
				<div class="roadMapPoint ball" data-id="3"></div>
				<div class="roadMapPoint" data-id="4"></div>
				<div class="roadMapPoint" data-id="5"></div>
				<div class="roadMapPoint" data-id="6"></div>
				<div class="roadMapPoint" data-id="7"></div>
				<div class="roadMapPoint" data-id="8"></div>
			</div>
			<button class="navButton" data-direction=">"> Next </button>
		</div>

		<div class="roadMap__container red">
			<button class="navButton" data-direction="<"> Prev </button>
			<div class="roadMap">
				<div class="roadMapPoint" data-id="1"></div>
				<div class="roadMapPoint" data-id="2"></div>
				<div class="roadMapPoint ball" data-id="3"></div>
				<div class="roadMapPoint" data-id="4"></div>
				<div class="roadMapPoint" data-id="5"></div>
				<div class="roadMapPoint" data-id="6"></div>
				<div class="roadMapPoint" data-id="7"></div>
			</div>
			<button class="navButton" data-direction=">"> Next </button>
		</div>

		<div class="roadMap__container blue">
			<button class="navButton" data-direction="<"> Prev </button>
			<div class="roadMap">
				<div class="roadMapPoint" data-id="1"></div>
				<div class="roadMapPoint ball" data-id="2"></div>
				<div class="roadMapPoint" data-id="3"></div>
				<div class="roadMapPoint" data-id="4"></div>
			</div>
			<button class="navButton" data-direction=">"> Next </button>
		</div>

		<div class="roadMap__container red">
				<button class="navButton" data-direction="<"> Prev </button>
				<div class="roadMap">
					<div class="roadMapPoint" data-id="1"></div>
					<div class="roadMapPoint ball" data-id="2"></div>
				</div>
				<button class="navButton" data-direction=">"> Next </button>
			</div>

			<div class="roadMap__container blue">
				<button class="navButton" data-direction="<"> Prev </button>
				<div class="roadMap">
					<div class="roadMapPoint" data-id="1"></div>
					<div class="roadMapPoint ball" data-id="2"></div>
					<div class="roadMapPoint" data-id="3"></div>
					<div class="roadMapPoint" data-id="4"></div>
				</div>
				<button class="navButton" data-direction=">"> Next </button>
			</div>

			<div class="roadMap__container red">
				<button class="navButton" data-direction="<"> Prev </button>
				<div class="roadMap">
					<div class="roadMapPoint" data-id="1"></div>
					<div class="roadMapPoint ball" data-id="2"></div>
					<div class="roadMapPoint" data-id="3"></div>
					<div class="roadMapPoint" data-id="4"></div>
					<div class="roadMapPoint" data-id="5"></div>
					<div class="roadMapPoint" data-id="6"></div>
					<div class="roadMapPoint" data-id="7"></div>
				</div>
				<button class="navButton" data-direction=">"> Next </button>
			</div>

			<div class="roadMap__container blue">
				<button class="navButton" data-direction="<"> Prev </button>
				<div class="roadMap">
					<div class="roadMapPoint" data-id="1"></div>
					<div class="roadMapPoint ball" data-id="2"></div>
					<div class="roadMapPoint" data-id="3"></div>
				</div>
				<button class="navButton" data-direction=">"> Next </button>
			</div>

	</div>
	<script>

		/*
		
			Задание:

			Написать скрипт, который будет приводить в действие переключалки из разметки.
			И будет перемещать класс ball по точкам в зависимости от нажатой кнопки

		*/
document.addEventListener("DOMContentLoaded", function(event) {

		let containers = document.querySelectorAll('.roadMap__container');
		
		containers.forEach( function( container ){
				let next = container.querySelector('.navButton[data-direction=">"]');
				let prev = container.querySelector('.navButton[data-direction="<"]');
				let arr = container.querySelectorAll('.roadMapPoint');
				
				next.onclick = function(){
					let ball = container.querySelector('.ball');
					let ballId = +ball.dataset.id;
					let nextPoint = arr[ballId];
					if(ballId === arr.length){
						nextPoint = arr[0];
					}
					nextPoint.classList.add('ball');
					ball.classList.remove('ball');
				}

				prev.onclick = function(){
					let ball = container.querySelector('.ball');
					let ballId = +ball.dataset.id-2;
					let nextPoint = arr[ballId];
					if(ballId === -1){
						nextPoint = arr[arr.length-1];
					}
					nextPoint.classList.add('ball');
					ball.classList.remove('ball');
				}
			});
});

	</script>
</body>

</html>
